-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '21f4fabd211b10ec' HASH 'f99fcd2a8b179f4db3d481786351fe48a4d9e7c5cf99ac833c71f2b814b09c3e' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "USERNAME" CHARACTER VARYING(255) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255)
);             
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("USERNAME");  
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
INSERT INTO "PUBLIC"."USERS" VALUES
('sbhogad1', '1234'),
('bb', '1234'),
('me', '1234'),
('you', '1234'),
('I', '1234'),
('testuser', 'password');     
CREATE CACHED TABLE "PUBLIC"."USER_ROLES"(
    "USERNAME" CHARACTER VARYING(255),
    "ROLE" CHARACTER VARYING(20)
);      
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.USER_ROLES;              
INSERT INTO "PUBLIC"."USER_ROLES" VALUES
('sbhogad1', 'ADMIN'),
('bb', 'INSTRUCTOR'),
('me', 'INSTRUCTOR'),
('me', 'INSTRUCTOR'),
('you', 'STUDENT'),
('me', 'INSTRUCTOR'),
('I', 'INSTRUCTOR');       
CREATE CACHED TABLE "PUBLIC"."ARTICLES"(
    "ID" BIGINT NOT NULL,
    "LEVEL" CHARACTER VARYING(50),
    "TITLE" CHARACTER VARYING(255),
    "SHORTDESCRIPTION" CHARACTER VARYING(1024),
    "BODY" CHARACTER VARYING,
    "SENSITIVE" BOOLEAN,
    "AUTHOR" CHARACTER VARYING(255)
);               
ALTER TABLE "PUBLIC"."ARTICLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");     
-- 10 +/- SELECT COUNT(*) FROM PUBLIC.ARTICLES;               
INSERT INTO "PUBLIC"."ARTICLES" VALUES
(1, 'intermediate', 'jk', 'jkjk', 'xbNq9I6piCorX94SFN/MfTvdVmEXzWmb8/QUjmL1yxo=', TRUE, 'sbhogad1'),
(2, 'intermediate', 'to', 'sjgfjs', '+RXAeyUFwZMI+hVeu+iJAQ==', TRUE, 'sbhogad1'),
(3, 'beginner', 'Test Article', 'This is a test', 'Test Body', FALSE, 'Unknown'),
(4, 'advanced', 'Updated Title', 'Updated Desc', 'Updated Body', FALSE, 'Unknown'),
(5, 'beginner', 'Sensitive Article', 'Sensitive Desc', 'CqKGyuTWIlu23Lb03WV9YA==', TRUE, 'Unknown'),
(6, 'beginner', 'Group Article', 'In group', 'BJPkQCpmZiQBGO7gLSTASg==', TRUE, 'Unknown'),
(7, 'beginner', 'Test Article', 'This is a test', 'Test Body', FALSE, 'Unknown'),
(8, 'advanced', 'Updated Title', 'Updated Desc', 'Updated Body', FALSE, 'Unknown'),
(9, 'beginner', 'Sensitive Article', 'Sensitive Desc', 'CqKGyuTWIlu23Lb03WV9YA==', TRUE, 'Unknown'),
(10, 'beginner', 'Group Article', 'In group', 'BJPkQCpmZiQBGO7gLSTASg==', TRUE, 'Unknown');         
CREATE CACHED TABLE "PUBLIC"."ARTICLE_KEYWORDS"(
    "ARTICLE_ID" BIGINT,
    "KEYWORD" CHARACTER VARYING(255)
);          
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.ARTICLE_KEYWORDS;        
INSERT INTO "PUBLIC"."ARTICLE_KEYWORDS" VALUES
(2, 'mm'),
(2, 'm'),
(1, 'j'),
(1, 'k');   
CREATE CACHED TABLE "PUBLIC"."ARTICLE_LINKS"(
    "ARTICLE_ID" BIGINT,
    "LINK" CHARACTER VARYING(255)
);
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ARTICLE_LINKS;           
INSERT INTO "PUBLIC"."ARTICLE_LINKS" VALUES
(2, 'nwfbhwj'),
(1, 'anfmab');  
CREATE CACHED TABLE "PUBLIC"."ARTICLE_GROUPS"(
    "ARTICLE_ID" BIGINT,
    "GROUPNAME" CHARACTER VARYING(255)
);          
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.ARTICLE_GROUPS;          
INSERT INTO "PUBLIC"."ARTICLE_GROUPS" VALUES
(2, 'nu'),
(6, 'TestGroup'),
(10, 'TestGroup');               
CREATE CACHED TABLE "PUBLIC"."INVITATION_CODES"(
    "CODE" CHARACTER VARYING(255) NOT NULL,
    "ROLE" CHARACTER VARYING(20)
);           
ALTER TABLE "PUBLIC"."INVITATION_CODES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("CODE");           
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.INVITATION_CODES;        
INSERT INTO "PUBLIC"."INVITATION_CODES" VALUES
('INV-1731813468269', 'STUDENT');             
CREATE CACHED TABLE "PUBLIC"."MESSAGES"(
    "USERNAME" CHARACTER VARYING(255),
    "MESSAGETYPE" CHARACTER VARYING(20),
    "MESSAGE" CHARACTER VARYING
);               
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.MESSAGES;
INSERT INTO "PUBLIC"."MESSAGES" VALUES
('you', 'generic', 'hello'),
('you', 'specific', U&'every\000aSearch History: to, t');               
CREATE CACHED TABLE "PUBLIC"."SPECIAL_ACCESS_GROUPS"(
    "GROUPNAME" CHARACTER VARYING(255) NOT NULL
);    
ALTER TABLE "PUBLIC"."SPECIAL_ACCESS_GROUPS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("GROUPNAME"); 
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.SPECIAL_ACCESS_GROUPS;   
INSERT INTO "PUBLIC"."SPECIAL_ACCESS_GROUPS" VALUES
('special'),
('TestGroup');             
CREATE CACHED TABLE "PUBLIC"."GROUP_ADMINS"(
    "GROUPNAME" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);              
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.GROUP_ADMINS;            
INSERT INTO "PUBLIC"."GROUP_ADMINS" VALUES
('special', 'sbhogad1'),
('special', 'me');      
CREATE CACHED TABLE "PUBLIC"."GROUP_USERS"(
    "GROUPNAME" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255),
    "ACCESSLEVEL" CHARACTER VARYING(20)
);     
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.GROUP_USERS;             
INSERT INTO "PUBLIC"."GROUP_USERS" VALUES
('special', 'me', 'Admin Access'),
('TestGroup', 'testuser', 'View Access'),
('TestGroup', 'testuser', 'View Access');           
ALTER TABLE "PUBLIC"."ARTICLE_GROUPS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_CD" FOREIGN KEY("ARTICLE_ID") REFERENCES "PUBLIC"."ARTICLES"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."ARTICLE_KEYWORDS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" FOREIGN KEY("ARTICLE_ID") REFERENCES "PUBLIC"."ARTICLES"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."GROUP_USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F8B" FOREIGN KEY("USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;          
ALTER TABLE "PUBLIC"."ARTICLE_LINKS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" FOREIGN KEY("ARTICLE_ID") REFERENCES "PUBLIC"."ARTICLES"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."GROUP_ADMINS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_FB" FOREIGN KEY("USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;          
ALTER TABLE "PUBLIC"."USER_ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" FOREIGN KEY("USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;             
ALTER TABLE "PUBLIC"."GROUP_ADMINS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" FOREIGN KEY("GROUPNAME") REFERENCES "PUBLIC"."SPECIAL_ACCESS_GROUPS"("GROUPNAME") NOCHECK;         
ALTER TABLE "PUBLIC"."GROUP_USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F8" FOREIGN KEY("GROUPNAME") REFERENCES "PUBLIC"."SPECIAL_ACCESS_GROUPS"("GROUPNAME") NOCHECK;         
